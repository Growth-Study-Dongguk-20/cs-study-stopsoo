## CS Study - Section115 가상기억장치 구현 기법 / 페이지 교체 알고리즘
### ✏️ Study
#### 💡 가상기억장치의 개요
- `가상기억장치`
  - 보조기억장치(하드디스크)의 일부를 주기억장치처럼 사용하는 것.
  - 용량이 작은 주기억장치를 마치 큰 용량을 가진 것처럼 사용.
- 특징
  - 프로그램을 여러 개의 작은 블록 단위로 나누어서 가상기억장치에 보관해 놓고, 프로그램 실행 시 요구되는 블록만 주기억장치에 불연속적으로 할당하여 처리.
  - 주기억장치의 용량보다 **큰** 프로그램을 실행하기 위해 사용.
  - 주기억장치의 이용률과 다중 프로그래밍의 효율을 높일 수 있음.
  - 가상기억장치에 저장된 프로그램을 실행하기 위해서는, 가상기억장치의 주소를 주기억장치의 주소로 바꾸는 **주소 변환 작업**이 필요.
  - 블록 단위로 나누어 사용하므로, 연속 할당 방식에서 발생할 수 있는 단편화를 해결 가능.
  - 가상기억장치의 구현 방법으로는 페이징 기법과 세그먼테이션 기법이 존재. ➡️ **블록의 종류**에 따라!
<br>

#### 💡 페이징(Paging) 기법
- 의미
  - 가상기억장치에 보관되어 있는 프로그램과 주기억장치의 영역을 동일한 크기로 나눈 후, 나눠진 프로그램(페이지)을 동일하게 나눠진 주기억장치의 영역(페이지 프레임)에 적재시켜 실행하는 기법.
- 특징
  - `페이지(Page)` : 프로그램을 일정한 크기로 나눈 단위.
  - `페이지 프레임(Page Frame)` : 페이지 크기로 일정하게 나눠진 주기억장치의 단위.
  - 외부 단편화는 발생 ❌ 내부 단편화는 발생 가능 🅾️
  - **주소 변환**을 위해, 페이지의 위치 정보를 가지고 있는 `페이지 맵 테이블(Page Map Table)`이 필요. 페이지 맵 테이블 사용을 통해 비용이 증가, 처리 속도가 감소됨.
<br>

#### 💡 세그먼테이션(Segmentation) 기법
- 의미
  - 가상기억장치에 보관되어 있는 프로그램을 다양한 크기의 논리적인 단위로 나눈 후 주기억장치에 적재시켜 실행시키는 기법.
- 특징
  - `세그먼트(Segment)` : 프로그램을 `배열`이나 `함수` 등과 같은 논리적인 크기로 나눈 단위. ➡️ 각 세그먼트는 고유한 이름과 크기를 가짐.
  - 기억장치의 사용자 관점을 보존하는 기억장치 관리 기법.
  - **기억 공간을 절약하기 위해 사용.**
  - **주소 변환**을 위해 세그먼트가 존재하는 위치 정보를 가지고 있는 `세그먼트 맵 테이블(Segment Map Table)`이 필요.
  - 세그먼트가 주기억장치에 적재될 때 다른 세그먼트에게 할당된 영역을 침범할 수 없음. ➡️ 이를 위해 `기억장치 보호키(Storage Protection Key)`가 필요.
  - 내부 단편화는 발생 ❌ 외부 단편화는 발생 가능 🅾️
<br>

#### 💡 페이지 교체 알고리즘
- 의미
  - `페이지 부재(Page Fault)`가 발생했을 때 가상 기억장치에 필요한 페이지를 주기억장치에 적재해야 하는데, 이 때 주기억장치의 모든 페이지 프레임이 사용중이면 어떤 페이지 프레임을 선택하여 교체할 것인지를 결정하는 기법.
- 알고리즘
  - 1️⃣ **OPT(OPTimal replacement, 최적 교체)**
    - 앞으로 가장 오랫동안 사용하지 않을 페이지를 교체하는 기법.
  - 2️⃣ **FIFO(First In, First Out)**
    - 가장 먼저 들어와서 가장 오래 있었던 페이지를 교체하는 기법.
  - 3️⃣ **LRU(Least Recently Used)**
    - 최근에 가장 오랫동안 사용하지 않은 페이지를 교체하는 기법.
  - 4️⃣ **LFU(Least Frequently Used)**
    - 사용 빈도가 가장 적은 페이지를 교체하는 기법.
  - 5️⃣ **NUR(Not Used Recently)**
    - 최근에 사용하지 않은 페이지를 교체하는 기법.
    - LRU와 비슷한 알고리즘.
  - 6️⃣ **SCR(Second Chance Replacement, 2차 기회 교체)**
    - 가장 오랫동안 주기억장치에 있던 페이지 중 자주 사용되는 페이지의 교체를 방지하기 위한 것.
    - FIFO 기법의 단점을 보완.
##### 🔖 페이지 부재
- CPU가 액세스한 가상 페이지가 주기억장치에 없는 경우.
- 페이지 부재가 발생하면 해당 페이지를 디스크에서 주기억장치로 가져와야 함.
<br>


